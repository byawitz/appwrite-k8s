

---
apiVersion: v1
kind: Namespace
metadata:
  name: appwrite
  labels:
    name: appwrite

---
kind: "ConfigMap"
apiVersion: "v1"
metadata:
  name: "appwrite"
  namespace: appwrite
data:
  _APP_ENV: "production"
  _APP_LOCALE: "en"
  _APP_OPTIONS_ABUSE: "enabled"
  _APP_OPTIONS_FORCE_HTTPS: "disabled"
  _APP_OPTIONS_FUNCTIONS_FORCE_HTTPS: "disabled"
  _APP_OPTIONS_ROUTER_PROTECTION: "disabled"
  _APP_DOMAIN: "localhost"
  _APP_DOMAIN_FUNCTIONS: "functions.localhost"
  _APP_DOMAIN_TARGET: "localhost"
  _APP_CONSOLE_WHITELIST_ROOT: "enabled"
  _APP_CONSOLE_WHITELIST_EMAILS: ""
  _APP_CONSOLE_WHITELIST_IPS: ""
  _APP_SYSTEM_EMAIL_NAME: "Appwrite"
  _APP_SYSTEM_EMAIL_ADDRESS: "team@appwrite.io"
  _APP_SYSTEM_RESPONSE_FORMAT: ""
  _APP_SYSTEM_SECURITY_EMAIL_ADDRESS: "certs@appwrite.io"
  _APP_USAGE_STATS: "enabled"
  _APP_LOGGING_PROVIDER: ""
  _APP_LOGGING_CONFIG: ""
  _APP_USAGE_AGGREGATION_INTERVAL: "30"
  _APP_USAGE_TIMESERIES_INTERVAL: "30"
  _APP_USAGE_DATABASE_INTERVAL: "900"
  _APP_WORKER_PER_CORE: "6"
  _APP_REDIS_HOST: "appwrite-redis"
  _APP_REDIS_PORT: "6379"
  _APP_DB_HOST: "appwrite-mariadb"
  _APP_DB_PORT: "3306"
  _APP_DB_SCHEMA: "appwrite"
  _APP_DB_USER: "user"
  _APP_INFLUXDB_HOST: "appwrite-influxdb"
  _APP_INFLUXDB_PORT: "8086"
  _APP_STATSD_HOST: "appwrite-telegraf"
  _APP_STATSD_PORT: "8125"
  _APP_SMTP_HOST: ""
  _APP_SMTP_PORT: ""
  _APP_SMTP_SECURE: ""
  _APP_SMTP_USERNAME: ""
  _APP_SMS_PROVIDER: ""
  _APP_SMS_FROM: ""
  _APP_STORAGE_LIMIT: "30000000"
  _APP_STORAGE_PREVIEW_LIMIT: "20000000"
  _APP_STORAGE_ANTIVIRUS: "disabled"
  _APP_STORAGE_ANTIVIRUS_HOST: "clamav"
  _APP_STORAGE_ANTIVIRUS_PORT: "3310"
  _APP_STORAGE_DEVICE: "s3"
  _APP_STORAGE_S3_ACCESS_KEY: ""
  _APP_STORAGE_S3_REGION: "us-east-1"
  _APP_STORAGE_S3_BUCKET: ""
  _APP_STORAGE_DO_SPACES_ACCESS_KEY: ""
  _APP_STORAGE_DO_SPACES_REGION: "us-east-1"
  _APP_STORAGE_DO_SPACES_BUCKET: ""
  _APP_STORAGE_BACKBLAZE_ACCESS_KEY: ""
  _APP_STORAGE_BACKBLAZE_REGION: "us-west-004"
  _APP_STORAGE_BACKBLAZE_BUCKET: ""
  _APP_STORAGE_LINODE_ACCESS_KEY: ""
  _APP_STORAGE_LINODE_REGION: "eu-central-1"
  _APP_STORAGE_LINODE_BUCKET: ""
  _APP_STORAGE_WASABI_ACCESS_KEY: ""
  _APP_STORAGE_WASABI_REGION: "eu-central-1"
  _APP_STORAGE_WASABI_BUCKET: ""
  _APP_FUNCTIONS_SIZE_LIMIT: "30000000"
  _APP_FUNCTIONS_TIMEOUT: "900"
  _APP_FUNCTIONS_BUILD_TIMEOUT: "900"
  _APP_FUNCTIONS_CONTAINERS: "10"
  _APP_FUNCTIONS_CPUS: "0"
  _APP_FUNCTIONS_MEMORY: "0"
  _APP_FUNCTIONS_MEMORY_SWAP: "0"
  _APP_FUNCTIONS_RUNTIMES: "php-8.1,dart-2.18,deno-1.24,node-18.0,python-3.10,ruby-3.1,cpp-17,dotnet-6.0"
  _APP_EXECUTOR_HOST: "https://docker.swarm.opr.proxy/v1"
  _APP_EXECUTOR_RUNTIME_NETWORK: "appwrite_runtimes"
  _APP_FUNCTIONS_ENVS: "php-8.1,dart-2.18,deno-1.24,node-18.0,python-3.10,ruby-3.1,cpp-17,dotnet-6.0"
  _APP_FUNCTIONS_INACTIVE_THRESHOLD: "60"
  DOCKERHUB_PULL_USERNAME: ""
  DOCKERHUB_PULL_EMAIL: ""
  OPEN_RUNTIMES_NETWORK: "appwrite_runtimes"
  _APP_FUNCTIONS_RUNTIMES_NETWORK: "runtimes"
  _APP_DOCKER_HUB_USERNAME: ""
  _APP_FUNCTIONS_MAINTENANCE_INTERVAL: "3600"
  _APP_VCS_GITHUB_APP_NAME: ""
  _APP_VCS_GITHUB_APP_ID: ""
  _APP_VCS_GITHUB_CLIENT_ID: ""
  _APP_MAINTENANCE_INTERVAL: "86400"
  _APP_MAINTENANCE_RETENTION_CACHE: "2592000"
  _APP_MAINTENANCE_RETENTION_EXECUTION: "1209600"
  _APP_MAINTENANCE_RETENTION_AUDIT: "1209600"
  _APP_MAINTENANCE_RETENTION_ABUSE: "86400"
  _APP_MAINTENANCE_RETENTION_USAGE_HOURLY: "8640000"
  _APP_MAINTENANCE_RETENTION_SCHEDULES: "86400"
  _APP_GRAPHQL_MAX_BATCH_SIZE: "10"
  _APP_GRAPHQL_MAX_COMPLEXITY: "250"
  _APP_GRAPHQL_MAX_DEPTH: "3"
  _APP_MIGRATIONS_FIREBASE_CLIENT_ID: ""

---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: appwrite-influxdb
  namespace: appwrite
  labels:
    app: appwrite-influxdb
spec:
  selector:
    matchLabels:
      app: appwrite-influxdb
  strategy:
    type: Recreate
  template:
    metadata:
      labels:
        app: appwrite-influxdb
    spec:
      containers:
        - image: appwrite/influxdb:1.5.0
          imagePullPolicy: IfNotPresent
          name: influxdb
          ports:
            - containerPort: 8086
          securityContext:
            allowPrivilegeEscalation: false
            runAsNonRoot: true
            readOnlyRootFilesystem: false
            runAsUser: 1000
          volumeMounts:
            - name: appwrite-influxdb
              mountPath: /var/lib/influxdb
      volumes:
        - name: appwrite-influxdb
          persistentVolumeClaim:
            claimName: appwrite-influxdb

---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: appwrite-mariadb
  namespace: appwrite
  labels:
    app: appwrite-mariadb
spec:
  selector:
    matchLabels:
      app: appwrite-mariadb
  strategy:
    type: Recreate
  template:
    metadata:
      labels:
        app: appwrite-mariadb
    spec:
      containers:
        - image: mariadb:10.7
          imagePullPolicy: IfNotPresent
          name: maraidb
          env:
            - name: MYSQL_ROOT_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_DB_ROOT_PASS
            - name: MYSQL_DATABASE
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_DB_SCHEMA
            - name: MYSQL_USER
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_DB_USER
            - name: MYSQL_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_DB_PASS
          securityContext:
            allowPrivilegeEscalation: false
            runAsNonRoot: true
            readOnlyRootFilesystem: false
            runAsUser: 1000
          ports:
            - containerPort: 3306
          volumeMounts:
            - name: appwrite-mariadb
              mountPath: /var/lib/mysql
      volumes:
        - name: appwrite-mariadb
          persistentVolumeClaim:
            claimName: appwrite-mariadb

---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: appwrite-redis
  namespace: appwrite
  labels:
    app: appwrite-redis
spec:
  selector:
    matchLabels:
      app: appwrite-redis
  strategy:
    type: Recreate
  template:
    metadata:
      labels:
        app: appwrite-redis
    spec:
      containers:
        - image: redis:7.0.4-alpine
          imagePullPolicy: IfNotPresent
          name: redis
          securityContext:
            allowPrivilegeEscalation: false
            runAsNonRoot: true
            runAsUser: 1000
            readOnlyRootFilesystem: false
          ports:
            - containerPort: 6379
          volumeMounts:
            - name: appwrite-redis
              mountPath: /data
      volumes:
        - name: appwrite-redis
          persistentVolumeClaim:
            claimName: appwrite-redis

---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: appwrite-telegraf
  namespace: appwrite
  labels:
    app: appwrite-telegraf
spec:
  selector:
    matchLabels:
      app: appwrite-telegraf
  strategy:
    type: Recreate
  template:
    metadata:
      labels:
        app: appwrite-telegraf
    spec:
      containers:
        - image: appwrite/telegraf:1.4.0
          imagePullPolicy: IfNotPresent
          name: telegraf
          securityContext:
            allowPrivilegeEscalation: false
            runAsNonRoot: true
            runAsUser: 1000
            readOnlyRootFilesystem: false
          ports:
            - containerPort: 8125
          env:
            - name: _APP_INFLUXDB_HOST
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_INFLUXDB_HOST
            - name: _APP_INFLUXDB_PORT
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_INFLUXDB_PORT


---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: appwrite-appwrite
  namespace: appwrite
  labels:
    app: appwrite-appwrite
spec:
  selector:
    matchLabels:
      app: appwrite-appwrite
  replicas: 1
  template:
    metadata:
      name: appwrite-appwrite
      labels:
        app: appwrite-appwrite
    spec:
      containers:
        - name: appwrite-appwrite
          image: appwrite/appwrite:1.4.13
          imagePullPolicy: IfNotPresent
          ports:
            - containerPort: 80
          envFrom:
            - configMapRef:
                name: appwrite
            - secretRef:
                name: appwrite-secrets
          volumeMounts:
            - mountPath: /storage/uploads
              name: appwrite-uploads
            - mountPath: /storage/cache
              name: appwrite-cache
            - mountPath: /storage/config
              name: appwrite-config
            - mountPath: /storage/certificates
              name: appwrite-certificates
            - mountPath: /storage/functions
              name: appwrite-functions
      volumes:
        - name: appwrite-uploads
          persistentVolumeClaim:
            claimName: appwrite-uploads
        - name: appwrite-cache
          persistentVolumeClaim:
            claimName: appwrite-cache
        - name: appwrite-config
          persistentVolumeClaim:
            claimName: appwrite-config
        - name: appwrite-certificates
          persistentVolumeClaim:
            claimName: appwrite-certificates
        - name: appwrite-functions
          persistentVolumeClaim:
            claimName: appwrite-functions
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: appwrite-assistant
  namespace: appwrite
  labels:
    app: appwrite-assistant
spec:
  selector:
    matchLabels:
      app: appwrite-assistant
  replicas: 1
  template:
    metadata:
      name: appwrite-assistant
      labels:
        app: appwrite-assistant
    spec:
      containers:
        - name: appwrite-assistant
          image: appwrite/assistant:0.2.2
          imagePullPolicy: IfNotPresent
          env:
            - name: _APP_ASSISTANT_OPENAI_API_KEY
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_ASSISTANT_OPENAI_API_KEY
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: appwrite-realtime
  namespace: appwrite
  labels:
    app: appwrite-realtime
spec:
  selector:
    matchLabels:
      app: appwrite-realtime
  replicas: 1
  template:
    metadata:
      name: appwrite-realtime
      labels:
        app: appwrite-realtime
    spec:
      containers:
        - name: appwrite-realtime
          image: appwrite/appwrite:1.4.13
          imagePullPolicy: IfNotPresent
          ports:
            - containerPort: 80
              name: http
          command:
            - "realtime"
          env:
            - name: _APP_ENV
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_ENV
            - name: _APP_WORKER_PER_CORE
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_WORKER_PER_CORE
            - name: _APP_OPTIONS_ABUSE
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_OPTIONS_ABUSE
            - name: _APP_OPTIONS_ROUTER_PROTECTION
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_OPTIONS_ROUTER_PROTECTION
            - name: _APP_OPENSSL_KEY_V1
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_OPENSSL_KEY_V1
            - name: _APP_REDIS_HOST
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_REDIS_HOST
            - name: _APP_REDIS_PORT
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_REDIS_PORT
            - name: _APP_REDIS_USER
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_REDIS_USER
            - name: _APP_REDIS_PASS
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_REDIS_PASS
            - name: _APP_DB_HOST
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_DB_HOST
            - name: _APP_DB_PORT
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_DB_PORT
            - name: _APP_DB_SCHEMA
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_DB_SCHEMA
            - name: _APP_DB_USER
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_DB_USER
            - name: _APP_DB_PASS
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_DB_PASS
            - name: _APP_USAGE_STATS
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_USAGE_STATS
            - name: _APP_LOGGING_PROVIDER
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_LOGGING_PROVIDER
            - name: _APP_LOGGING_CONFIG
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_LOGGING_CONFIG
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: appwrite-maintenance
  namespace: appwrite
  labels:
    app: appwrite
spec:
  selector:
    matchLabels:
      app: appwrite
  replicas: 1
  template:
    metadata:
      name: appwrite-maintenance
      labels:
        app: appwrite
    spec:
      containers:
        - name: appwrite-maintenance
          image: appwrite/appwrite:1.4.13
          imagePullPolicy: IfNotPresent
          command:
            - "maintenance"
          env:
            - name: _APP_ENV
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_ENV
            - name: _APP_WORKER_PER_CORE
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_WORKER_PER_CORE
            - name: _APP_DOMAIN
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_DOMAIN
            - name: _APP_DOMAIN_TARGET
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_DOMAIN_TARGET
            - name: _APP_DOMAIN_FUNCTIONS
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_DOMAIN_FUNCTIONS
            - name: _APP_OPENSSL_KEY_V1
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_OPENSSL_KEY_V1
            - name: _APP_REDIS_HOST
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_REDIS_HOST
            - name: _APP_REDIS_PORT
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_REDIS_PORT
            - name: _APP_REDIS_USER
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_REDIS_USER
            - name: _APP_REDIS_PASS
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_REDIS_PASS
            - name: _APP_DB_HOST
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_DB_HOST
            - name: _APP_DB_PORT
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_DB_PORT
            - name: _APP_DB_SCHEMA
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_DB_SCHEMA
            - name: _APP_DB_USER
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_DB_USER
            - name: _APP_DB_PASS
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_DB_PASS
            - name: _APP_MAINTENANCE_INTERVAL
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_MAINTENANCE_INTERVAL
            - name: _APP_MAINTENANCE_RETENTION_EXECUTION
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_MAINTENANCE_RETENTION_EXECUTION
            - name: _APP_MAINTENANCE_RETENTION_CACHE
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_MAINTENANCE_RETENTION_CACHE
            - name: _APP_MAINTENANCE_RETENTION_ABUSE
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_MAINTENANCE_RETENTION_ABUSE
            - name: _APP_MAINTENANCE_RETENTION_AUDIT
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_MAINTENANCE_RETENTION_AUDIT
            - name: _APP_MAINTENANCE_RETENTION_USAGE_HOURLY
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_MAINTENANCE_RETENTION_USAGE_HOURLY
            - name: _APP_MAINTENANCE_RETENTION_SCHEDULES
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_MAINTENANCE_RETENTION_SCHEDULES


---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: appwrite-schedule
  namespace: appwrite
  labels:
    app: appwrite
spec:
  selector:
    matchLabels:
      app: appwrite
  replicas: 1
  template:
    metadata:
      name: appwrite-schedule
      labels:
        app: appwrite
    spec:
      containers:
        - name: appwrite-schedule
          image: appwrite/appwrite:1.4.13
          imagePullPolicy: IfNotPresent
          command:
            - "schedule"
          env:
            - name: _APP_ENV
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_ENV
            - name: _APP_WORKER_PER_CORE
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_WORKER_PER_CORE
            - name: _APP_OPENSSL_KEY_V1
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_OPENSSL_KEY_V1
            - name: _APP_REDIS_HOST
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_REDIS_HOST
            - name: _APP_REDIS_PORT
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_REDIS_PORT
            - name: _APP_REDIS_USER
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_REDIS_USER
            - name: _APP_REDIS_PASS
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_REDIS_PASS
            - name: _APP_DB_HOST
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_DB_HOST
            - name: _APP_DB_PORT
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_DB_PORT
            - name: _APP_DB_SCHEMA
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_DB_SCHEMA
            - name: _APP_DB_USER
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_DB_USER
            - name: _APP_DB_PASS
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_DB_PASS

---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: appwrite-usage
  namespace: appwrite
  labels:
    app: appwrite
spec:
  selector:
    matchLabels:
      app: appwrite
  replicas: 1
  template:
    metadata:
      name: appwrite-usage
      labels:
        app: appwrite
    spec:
      containers:
        - name: appwrite-usage
          image: appwrite/appwrite:1.4.13
          imagePullPolicy: IfNotPresent
          command:
            - "usage"
          ports:
            - containerPort: 80
              name: http
          env:
            - name: _APP_ENV
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_ENV
            - name: _APP_WORKER_PER_CORE
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_WORKER_PER_CORE
            - name: _APP_OPTIONS_ABUSE
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_OPTIONS_ABUSE
            - name: _APP_OPTIONS_ROUTER_PROTECTION
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_OPTIONS_ROUTER_PROTECTION
            - name: _APP_OPENSSL_KEY_V1
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_OPENSSL_KEY_V1
            - name: _APP_INFLUXDB_HOST
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_INFLUXDB_HOST
            - name: _APP_INFLUXDB_PORT
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_INFLUXDB_PORT
            - name: _APP_REDIS_HOST
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_REDIS_HOST
            - name: _APP_REDIS_PORT
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_REDIS_PORT
            - name: _APP_REDIS_USER
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_REDIS_USER
            - name: _APP_REDIS_PASS
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_REDIS_PASS
            - name: _APP_DB_HOST
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_DB_HOST
            - name: _APP_DB_PORT
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_DB_PORT
            - name: _APP_DB_SCHEMA
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_DB_SCHEMA
            - name: _APP_DB_USER
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_DB_USER
            - name: _APP_DB_PASS
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_DB_PASS
            - name: _APP_USAGE_STATS
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_USAGE_STATS
            - name: _APP_LOGGING_PROVIDER
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_LOGGING_PROVIDER
            - name: _APP_LOGGING_CONFIG
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_LOGGING_CONFIG
            - name: _APP_USAGE_AGGREGATION_INTERVAL
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_USAGE_AGGREGATION_INTERVAL
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: appwrite-audits
  namespace: appwrite
  labels:
    app: appwrite
spec:
  selector:
    matchLabels:
      app: appwrite
  replicas: 1
  template:
    metadata:
      name: appwrite-audits
      labels:
        app: appwrite
    spec:
      containers:
        - name: appwrite-audits
          image: appwrite/appwrite:1.4.13
          imagePullPolicy: IfNotPresent
          command:
            - "worker-audits"
          env:
            - name: _APP_ENV
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_ENV
            - name: _APP_WORKER_PER_CORE
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_WORKER_PER_CORE
            - name: _APP_OPENSSL_KEY_V1
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_OPENSSL_KEY_V1
            - name: _APP_REDIS_HOST
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_REDIS_HOST
            - name: _APP_REDIS_PORT
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_REDIS_PORT
            - name: _APP_REDIS_USER
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_REDIS_USER
            - name: _APP_REDIS_PASS
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_REDIS_PASS
            - name: _APP_DB_HOST
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_DB_HOST
            - name: _APP_DB_PORT
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_DB_PORT
            - name: _APP_DB_SCHEMA
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_DB_SCHEMA
            - name: _APP_DB_USER
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_DB_USER
            - name: _APP_DB_PASS
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_DB_PASS
            - name: _APP_LOGGING_PROVIDER
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_LOGGING_PROVIDER
            - name: _APP_LOGGING_CONFIG
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_LOGGING_CONFIG
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: appwrite-builds
  namespace: appwrite
  labels:
    app: appwrite
spec:
  selector:
    matchLabels:
      app: appwrite
  replicas: 1
  template:
    metadata:
      name: appwrite-builds
      labels:
        app: appwrite
    spec:
      containers:
        - name: appwrite-builds
          image: appwrite/appwrite:1.4.13
          imagePullPolicy: IfNotPresent
          command:
            - "worker-builds"
          env:
            - name: _APP_ENV
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_ENV
            - name: _APP_WORKER_PER_CORE
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_WORKER_PER_CORE
            - name: _APP_OPENSSL_KEY_V1
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_OPENSSL_KEY_V1
            - name: _APP_REDIS_HOST
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_REDIS_HOST
            - name: _APP_REDIS_PORT
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_REDIS_PORT
            - name: _APP_REDIS_USER
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_REDIS_USER
            - name: _APP_REDIS_PASS
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_REDIS_PASS
            - name: _APP_DB_HOST
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_DB_HOST
            - name: _APP_DB_PORT
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_DB_PORT
            - name: _APP_DB_SCHEMA
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_DB_SCHEMA
            - name: _APP_DB_USER
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_DB_USER
            - name: _APP_DB_PASS
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_DB_PASS
            - name: _APP_LOGGING_PROVIDER
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_LOGGING_PROVIDER
            - name: _APP_LOGGING_CONFIG
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_LOGGING_CONFIG
            - name: _APP_STORAGE_DEVICE
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_STORAGE_DEVICE
            - name: _APP_STORAGE_S3_ACCESS_KEY
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_STORAGE_S3_ACCESS_KEY
            - name: _APP_STORAGE_S3_SECRET
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_STORAGE_S3_SECRET
            - name: _APP_STORAGE_S3_REGION
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_STORAGE_S3_REGION
            - name: _APP_STORAGE_S3_BUCKET
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_STORAGE_S3_BUCKET
            - name: _APP_STORAGE_DO_SPACES_ACCESS_KEY
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_STORAGE_DO_SPACES_ACCESS_KEY
            - name: _APP_STORAGE_DO_SPACES_SECRET
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_STORAGE_DO_SPACES_SECRET
            - name: _APP_STORAGE_DO_SPACES_REGION
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_STORAGE_DO_SPACES_REGION
            - name: _APP_STORAGE_DO_SPACES_BUCKET
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_STORAGE_DO_SPACES_BUCKET
            - name: _APP_STORAGE_BACKBLAZE_ACCESS_KEY
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_STORAGE_BACKBLAZE_ACCESS_KEY
            - name: _APP_STORAGE_BACKBLAZE_SECRET
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_STORAGE_BACKBLAZE_SECRET
            - name: _APP_STORAGE_BACKBLAZE_REGION
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_STORAGE_BACKBLAZE_REGION
            - name: _APP_STORAGE_BACKBLAZE_BUCKET
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_STORAGE_BACKBLAZE_BUCKET
            - name: _APP_STORAGE_LINODE_ACCESS_KEY
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_STORAGE_LINODE_ACCESS_KEY
            - name: _APP_STORAGE_LINODE_SECRET
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_STORAGE_LINODE_SECRET
            - name: _APP_STORAGE_LINODE_REGION
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_STORAGE_LINODE_REGION
            - name: _APP_STORAGE_LINODE_BUCKET
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_STORAGE_LINODE_BUCKET
            - name: _APP_STORAGE_WASABI_ACCESS_KEY
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_STORAGE_WASABI_ACCESS_KEY
            - name: _APP_STORAGE_WASABI_SECRET
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_STORAGE_WASABI_SECRET
            - name: _APP_STORAGE_WASABI_REGION
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_STORAGE_WASABI_REGION
            - name: _APP_STORAGE_WASABI_BUCKET
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_STORAGE_WASABI_BUCKET
            - name: _APP_EXECUTOR_HOST
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_EXECUTOR_HOST
            - name: _APP_EXECUTOR_SECRET
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_EXECUTOR_SECRET
          volumeMounts:
            - mountPath: /storage/builds
              name: appwrite-builds
            - mountPath: /storage/functions
              name: appwrite-functions
      volumes:
        - name: appwrite-builds
          persistentVolumeClaim:
            claimName: appwrite-builds
        - name: appwrite-functions
          persistentVolumeClaim:
            claimName: appwrite-functions
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: appwrite-certificates
  namespace: appwrite
  labels:
    app: appwrite
spec:
  selector:
    matchLabels:
      app: appwrite
  replicas: 1
  template:
    metadata:
      name: appwrite-certificates
      labels:
        app: appwrite
    spec:
      containers:
        - name: appwrite-certificates
          image: appwrite/appwrite:1.4.13
          imagePullPolicy: IfNotPresent
          command:
            - "worker-certificates"
          env:
            - name: _APP_ENV
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_ENV
            - name: _APP_WORKER_PER_CORE
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_WORKER_PER_CORE
            - name: _APP_OPENSSL_KEY_V1
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_OPENSSL_KEY_V1
            - name: _APP_DOMAIN
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_DOMAIN
            - name: _APP_DOMAIN_TARGET
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_DOMAIN_TARGET
            - name: _APP_DOMAIN_FUNCTIONS
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_DOMAIN_FUNCTIONS
            - name: _APP_SYSTEM_SECURITY_EMAIL_ADDRESS
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_SYSTEM_SECURITY_EMAIL_ADDRESS
            - name: _APP_REDIS_HOST
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_REDIS_HOST
            - name: _APP_REDIS_PORT
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_REDIS_PORT
            - name: _APP_REDIS_USER
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_REDIS_USER
            - name: _APP_REDIS_PASS
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_REDIS_PASS
            - name: _APP_DB_HOST
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_DB_HOST
            - name: _APP_DB_PORT
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_DB_PORT
            - name: _APP_DB_SCHEMA
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_DB_SCHEMA
            - name: _APP_DB_USER
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_DB_USER
            - name: _APP_DB_PASS
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_DB_PASS
            - name: _APP_LOGGING_PROVIDER
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_LOGGING_PROVIDER
            - name: _APP_LOGGING_CONFIG
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_LOGGING_CONFIG
          volumeMounts:
            - mountPath: /storage/config
              name: appwrite-config
            - mountPath: /storage/certificates
              name: appwrite-certificates
      volumes:
        - name: appwrite-config
          persistentVolumeClaim:
            claimName: appwrite-config
        - name: appwrite-certificates
          persistentVolumeClaim:
            claimName: appwrite-certificates
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: appwrite-databases
  namespace: appwrite
  labels:
    app: appwrite
spec:
  selector:
    matchLabels:
      app: appwrite
  replicas: 1
  template:
    metadata:
      name: appwrite-databases
      labels:
        app: appwrite
    spec:
      containers:
        - name: appwrite-databases
          image: appwrite/appwrite:1.4.13
          imagePullPolicy: IfNotPresent
          command:
            - "worker-databases"
          env:
            - name: _APP_ENV
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_ENV
            - name: _APP_WORKER_PER_CORE
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_WORKER_PER_CORE
            - name: _APP_OPENSSL_KEY_V1
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_OPENSSL_KEY_V1
            - name: _APP_REDIS_HOST
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_REDIS_HOST
            - name: _APP_REDIS_PORT
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_REDIS_PORT
            - name: _APP_REDIS_USER
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_REDIS_USER
            - name: _APP_REDIS_PASS
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_REDIS_PASS
            - name: _APP_DB_HOST
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_DB_HOST
            - name: _APP_DB_PORT
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_DB_PORT
            - name: _APP_DB_SCHEMA
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_DB_SCHEMA
            - name: _APP_DB_USER
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_DB_USER
            - name: _APP_DB_PASS
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_DB_PASS
            - name: _APP_LOGGING_PROVIDER
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_LOGGING_PROVIDER
            - name: _APP_LOGGING_CONFIG
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_LOGGING_CONFIG
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: appwrite-deletes
  namespace: appwrite
  labels:
    app: appwrite
spec:
  selector:
    matchLabels:
      app: appwrite
  replicas: 1
  template:
    metadata:
      name: appwrite-deletes
      labels:
        app: appwrite
    spec:
      containers:
        - name: appwrite-deletes
          image: appwrite/appwrite:1.4.13
          imagePullPolicy: IfNotPresent
          command:
            - "worker-deletes"
          env:
            - name: _APP_ENV
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_ENV
            - name: _APP_WORKER_PER_CORE
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_WORKER_PER_CORE
            - name: _APP_OPENSSL_KEY_V1
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_OPENSSL_KEY_V1
            - name: _APP_REDIS_HOST
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_REDIS_HOST
            - name: _APP_REDIS_PORT
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_REDIS_PORT
            - name: _APP_REDIS_USER
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_REDIS_USER
            - name: _APP_REDIS_PASS
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_REDIS_PASS
            - name: _APP_DB_HOST
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_DB_HOST
            - name: _APP_DB_PORT
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_DB_PORT
            - name: _APP_DB_SCHEMA
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_DB_SCHEMA
            - name: _APP_DB_USER
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_DB_USER
            - name: _APP_DB_PASS
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_DB_PASS
            - name: _APP_LOGGING_PROVIDER
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_LOGGING_PROVIDER
            - name: _APP_LOGGING_CONFIG
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_LOGGING_CONFIG
            - name: _APP_STORAGE_DEVICE
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_STORAGE_DEVICE
            - name: _APP_STORAGE_S3_ACCESS_KEY
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_STORAGE_S3_ACCESS_KEY
            - name: _APP_STORAGE_S3_SECRET
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_STORAGE_S3_SECRET
            - name: _APP_STORAGE_S3_REGION
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_STORAGE_S3_REGION
            - name: _APP_STORAGE_S3_BUCKET
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_STORAGE_S3_BUCKET
            - name: _APP_STORAGE_DO_SPACES_ACCESS_KEY
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_STORAGE_DO_SPACES_ACCESS_KEY
            - name: _APP_STORAGE_DO_SPACES_SECRET
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_STORAGE_DO_SPACES_SECRET
            - name: _APP_STORAGE_DO_SPACES_REGION
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_STORAGE_DO_SPACES_REGION
            - name: _APP_STORAGE_DO_SPACES_BUCKET
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_STORAGE_DO_SPACES_BUCKET
            - name: _APP_STORAGE_BACKBLAZE_ACCESS_KEY
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_STORAGE_BACKBLAZE_ACCESS_KEY
            - name: _APP_STORAGE_BACKBLAZE_SECRET
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_STORAGE_BACKBLAZE_SECRET
            - name: _APP_STORAGE_BACKBLAZE_REGION
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_STORAGE_BACKBLAZE_REGION
            - name: _APP_STORAGE_BACKBLAZE_BUCKET
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_STORAGE_BACKBLAZE_BUCKET
            - name: _APP_STORAGE_LINODE_ACCESS_KEY
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_STORAGE_LINODE_ACCESS_KEY
            - name: _APP_STORAGE_LINODE_SECRET
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_STORAGE_LINODE_SECRET
            - name: _APP_STORAGE_LINODE_REGION
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_STORAGE_LINODE_REGION
            - name: _APP_STORAGE_LINODE_BUCKET
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_STORAGE_LINODE_BUCKET
            - name: _APP_STORAGE_WASABI_ACCESS_KEY
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_STORAGE_WASABI_ACCESS_KEY
            - name: _APP_STORAGE_WASABI_SECRET
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_STORAGE_WASABI_SECRET
            - name: _APP_STORAGE_WASABI_REGION
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_STORAGE_WASABI_REGION
            - name: _APP_STORAGE_WASABI_BUCKET
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_STORAGE_WASABI_BUCKET
            - name: _APP_EXECUTOR_HOST
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_EXECUTOR_HOST
            - name: _APP_EXECUTOR_SECRET
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_EXECUTOR_SECRET
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: appwrite-functions
  namespace: appwrite
  labels:
    app: appwrite
spec:
  selector:
    matchLabels:
      app: appwrite
  replicas: 1
  template:
    metadata:
      name: appwrite-functions
      labels:
        app: appwrite
    spec:
      containers:
        - name: appwrite-functions
          image: appwrite/appwrite:1.4.13
          imagePullPolicy: IfNotPresent
          command:
            - "worker-functions"
          env:
            - name: _APP_ENV
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_ENV
            - name: _APP_WORKER_PER_CORE
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_WORKER_PER_CORE
            - name: _APP_OPENSSL_KEY_V1
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_OPENSSL_KEY_V1
            - name: _APP_REDIS_HOST
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_REDIS_HOST
            - name: _APP_REDIS_PORT
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_REDIS_PORT
            - name: _APP_REDIS_USER
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_REDIS_USER
            - name: _APP_REDIS_PASS
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_REDIS_PASS
            - name: _APP_DB_HOST
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_DB_HOST
            - name: _APP_DB_PORT
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_DB_PORT
            - name: _APP_DB_SCHEMA
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_DB_SCHEMA
            - name: _APP_DB_USER
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_DB_USER
            - name: _APP_DB_PASS
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_DB_PASS
            - name: _APP_LOGGING_PROVIDER
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_LOGGING_PROVIDER
            - name: _APP_LOGGING_CONFIG
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_LOGGING_CONFIG
            - name: _APP_STORAGE_DEVICE
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_STORAGE_DEVICE
            - name: _APP_STORAGE_S3_ACCESS_KEY
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_STORAGE_S3_ACCESS_KEY
            - name: _APP_STORAGE_S3_SECRET
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_STORAGE_S3_SECRET
            - name: _APP_STORAGE_S3_REGION
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_STORAGE_S3_REGION
            - name: _APP_STORAGE_S3_BUCKET
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_STORAGE_S3_BUCKET
            - name: _APP_STORAGE_DO_SPACES_ACCESS_KEY
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_STORAGE_DO_SPACES_ACCESS_KEY
            - name: _APP_STORAGE_DO_SPACES_SECRET
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_STORAGE_DO_SPACES_SECRET
            - name: _APP_STORAGE_DO_SPACES_REGION
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_STORAGE_DO_SPACES_REGION
            - name: _APP_STORAGE_DO_SPACES_BUCKET
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_STORAGE_DO_SPACES_BUCKET
            - name: _APP_STORAGE_BACKBLAZE_ACCESS_KEY
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_STORAGE_BACKBLAZE_ACCESS_KEY
            - name: _APP_STORAGE_BACKBLAZE_SECRET
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_STORAGE_BACKBLAZE_SECRET
            - name: _APP_STORAGE_BACKBLAZE_REGION
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_STORAGE_BACKBLAZE_REGION
            - name: _APP_STORAGE_BACKBLAZE_BUCKET
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_STORAGE_BACKBLAZE_BUCKET
            - name: _APP_STORAGE_LINODE_ACCESS_KEY
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_STORAGE_LINODE_ACCESS_KEY
            - name: _APP_STORAGE_LINODE_SECRET
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_STORAGE_LINODE_SECRET
            - name: _APP_STORAGE_LINODE_REGION
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_STORAGE_LINODE_REGION
            - name: _APP_STORAGE_LINODE_BUCKET
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_STORAGE_LINODE_BUCKET
            - name: _APP_STORAGE_WASABI_ACCESS_KEY
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_STORAGE_WASABI_ACCESS_KEY
            - name: _APP_STORAGE_WASABI_SECRET
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_STORAGE_WASABI_SECRET
            - name: _APP_STORAGE_WASABI_REGION
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_STORAGE_WASABI_REGION
            - name: _APP_STORAGE_WASABI_BUCKET
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_STORAGE_WASABI_BUCKET
            - name: _APP_EXECUTOR_HOST
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_EXECUTOR_HOST
            - name: _APP_EXECUTOR_SECRET
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_EXECUTOR_SECRET
          volumeMounts:
            - mountPath: /storage/builds
              name: appwrite-builds
            - mountPath: /storage/functions
              name: appwrite-functions
      volumes:
        - name: appwrite-builds
          persistentVolumeClaim:
            claimName: appwrite-builds
        - name: appwrite-functions
          persistentVolumeClaim:
            claimName: appwrite-functions
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: appwrite-mails
  namespace: appwrite
  labels:
    app: appwrite
spec:
  selector:
    matchLabels:
      app: appwrite
  replicas: 1
  template:
    metadata:
      name: appwrite-mails
      labels:
        app: appwrite
    spec:
      containers:
        - name: appwrite-mails
          image: appwrite/appwrite:1.4.13
          imagePullPolicy: IfNotPresent
          command:
            - "worker-mails"
          env:
            - name: _APP_ENV
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_ENV
            - name: _APP_WORKER_PER_CORE
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_WORKER_PER_CORE
            - name: _APP_OPENSSL_KEY_V1
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_OPENSSL_KEY_V1
            - name: _APP_REDIS_HOST
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_REDIS_HOST
            - name: _APP_REDIS_PORT
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_REDIS_PORT
            - name: _APP_REDIS_USER
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_REDIS_USER
            - name: _APP_REDIS_PASS
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_REDIS_PASS
            - name: _APP_DB_HOST
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_DB_HOST
            - name: _APP_DB_PORT
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_DB_PORT
            - name: _APP_DB_SCHEMA
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_DB_SCHEMA
            - name: _APP_DB_USER
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_DB_USER
            - name: _APP_DB_PASS
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_DB_PASS
            - name: _APP_LOGGING_PROVIDER
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_LOGGING_PROVIDER
            - name: _APP_LOGGING_CONFIG
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_LOGGING_CONFIG
            - name: _APP_SYSTEM_EMAIL_NAME
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_SYSTEM_EMAIL_NAME
            - name: _APP_SYSTEM_EMAIL_ADDRESS
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_SYSTEM_EMAIL_ADDRESS
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: appwrite-messaging
  namespace: appwrite
  labels:
    app: appwrite
spec:
  selector:
    matchLabels:
      app: appwrite
  replicas: 1
  template:
    metadata:
      name: appwrite-messaging
      labels:
        app: appwrite
    spec:
      containers:
        - name: appwrite-messaging
          image: appwrite/appwrite:1.4.13
          imagePullPolicy: IfNotPresent
          command:
            - "worker-messaging"
          env:
            - name: _APP_ENV
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_ENV
            - name: _APP_WORKER_PER_CORE
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_WORKER_PER_CORE
            - name: _APP_REDIS_HOST
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_REDIS_HOST
            - name: _APP_REDIS_PORT
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_REDIS_PORT
            - name: _APP_REDIS_USER
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_REDIS_USER
            - name: _APP_REDIS_PASS
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_REDIS_PASS
            - name: _APP_DB_HOST
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_DB_HOST
            - name: _APP_DB_PORT
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_DB_PORT
            - name: _APP_DB_SCHEMA
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_DB_SCHEMA
            - name: _APP_DB_USER
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_DB_USER
            - name: _APP_DB_PASS
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_DB_PASS
            - name: _APP_LOGGING_PROVIDER
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_LOGGING_PROVIDER
            - name: _APP_LOGGING_CONFIG
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_LOGGING_CONFIG
            - name: _APP_SMS_PROVIDER
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_SMS_PROVIDER
            - name: _APP_SMS_FROM
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_SMS_FROM
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: appwrite-migrations
  namespace: appwrite
  labels:
    app: appwrite
spec:
  selector:
    matchLabels:
      app: appwrite
  replicas: 1
  template:
    metadata:
      name: appwrite-migrations
      labels:
        app: appwrite
    spec:
      containers:
        - name: appwrite-migrations
          image: appwrite/appwrite:1.4.13
          imagePullPolicy: IfNotPresent
          command:
            - "worker-migrations"
          env:
            - name: _APP_ENV
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_ENV
            - name: _APP_WORKER_PER_CORE
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_WORKER_PER_CORE
            - name: _APP_OPENSSL_KEY_V1
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_OPENSSL_KEY_V1
            - name: _APP_DOMAIN
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_DOMAIN
            - name: _APP_DOMAIN_TARGET
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_DOMAIN_TARGET
            - name: _APP_DOMAIN_FUNCTIONS
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_DOMAIN_FUNCTIONS
            - name: _APP_SYSTEM_SECURITY_EMAIL_ADDRESS
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_SYSTEM_SECURITY_EMAIL_ADDRESS
            - name: _APP_REDIS_HOST
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_REDIS_HOST
            - name: _APP_REDIS_PORT
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_REDIS_PORT
            - name: _APP_REDIS_USER
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_REDIS_USER
            - name: _APP_REDIS_PASS
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_REDIS_PASS
            - name: _APP_DB_HOST
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_DB_HOST
            - name: _APP_DB_PORT
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_DB_PORT
            - name: _APP_DB_SCHEMA
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_DB_SCHEMA
            - name: _APP_DB_USER
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_DB_USER
            - name: _APP_DB_PASS
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_DB_PASS
            - name: _APP_LOGGING_PROVIDER
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_LOGGING_PROVIDER
            - name: _APP_LOGGING_CONFIG
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_LOGGING_CONFIG
            - name: _APP_MIGRATIONS_FIREBASE_CLIENT_ID
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_MIGRATIONS_FIREBASE_CLIENT_ID
            - name: _APP_MIGRATIONS_FIREBASE_CLIENT_SECRET
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_MIGRATIONS_FIREBASE_CLIENT_SECRET
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: appwrite-webhooks
  namespace: appwrite
  labels:
    app: appwrite
spec:
  selector:
    matchLabels:
      app: appwrite
  replicas: 1
  template:
    metadata:
      name: appwrite-webhooks
      labels:
        app: appwrite
    spec:
      containers:
        - name: appwrite-webhooks
          image: appwrite/appwrite:1.4.13
          imagePullPolicy: IfNotPresent
          command:
            - "worker-webhooks"
          env:
            - name: _APP_ENV
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_ENV
            - name: _APP_WORKER_PER_CORE
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_WORKER_PER_CORE
            - name: _APP_OPENSSL_KEY_V1
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_OPENSSL_KEY_V1
            - name: _APP_REDIS_HOST
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_REDIS_HOST
            - name: _APP_REDIS_PORT
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_REDIS_PORT
            - name: _APP_REDIS_USER
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_REDIS_USER
            - name: _APP_REDIS_PASS
              valueFrom:
                secretKeyRef:
                  name: appwrite-secrets
                  key: _APP_REDIS_PASS
            - name: _APP_LOGGING_PROVIDER
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_LOGGING_PROVIDER
            - name: _APP_LOGGING_CONFIG
              valueFrom:
                configMapKeyRef:
                  name: appwrite
                  key: _APP_LOGGING_CONFIG
---
apiVersion: autoscaling/v2
kind: HorizontalPodAutoscaler
metadata:
  namespace: appwrite
  name: appwrite-autoscaler
spec:
  scaleTargetRef:
    apiVersion: apps/v1
    kind: Deployment
    name: appwrite-appwrite
  minReplicas: 1
  maxReplicas: 10
  metrics:
    - type: Resource
      resource:
        name: cpu
        target:
          type: Utilization
          averageUtilization: 90
    - type: Resource
      resource:
        name: memory
        target:
          type: Utilization
          averageUtilization: 80
---
apiVersion: autoscaling/v2
kind: HorizontalPodAutoscaler
metadata:
  namespace: appwrite
  name: appwrite-realtime-autoscaler
spec:
  scaleTargetRef:
    apiVersion: apps/v1
    kind: Deployment
    name: appwrite-realtime
  minReplicas: 1
  maxReplicas: 10
  metrics:
    - type: Resource
      resource:
        name: cpu
        target:
          type: Utilization
          averageUtilization: 80
    - type: Resource
      resource:
        name: memory
        target:
          type: Utilization
          averageUtilization: 80
---
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: appwrite-ingress
  namespace: appwrite
  labels:
    app: appwrite-appwrite
spec:
  ingressClassName: nginx
  rules:
    - http:
        paths:
          - path: /
            pathType: Prefix
            backend:
              service:
                name: appwrite
                port:
                  number: 80

---
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: appwrite-realtime-ingress
  namespace: appwrite
  labels:
    app: appwrite-realtime
spec:
  ingressClassName: nginx
  rules:
    - http:
        paths:
          - path: /v1/realtime
            pathType: Prefix
            backend:
              service:
                name: appwrite-realtime
                port:
                  number: 80

---
apiVersion: v1
kind: Secret
metadata:
  namespace: appwrite
  name: appwrite-secrets
type: Opaque
data:
  _APP_OPENSSL_KEY_V1: "eW91ci1zZWNyZXQta2V5"
  _APP_REDIS_USER: ""
  _APP_REDIS_PASS: ""
  _APP_DB_PASS: "eW91ci1zZWNyZXQta2V5"
  _APP_DB_ROOT_PASS: "eW91ci1zZWNyZXQta2V5"
  _APP_SMTP_PASSWORD: ""
  _APP_STORAGE_S3_SECRET: "b1J6T1RrdlVYb2pQUHNlQ2FtbFp0am14S04ycVZsc28vM3VWQm01cw=="
  _APP_STORAGE_DO_SPACES_SECRET: ""
  _APP_STORAGE_BACKBLAZE_SECRET: ""
  _APP_STORAGE_LINODE_SECRET: ""
  _APP_STORAGE_WASABI_SECRET: ""
  _APP_EXECUTOR_SECRET: "eW91ci1zZWNyZXQta2V5"
  DOCKERHUB_PULL_PASSWORD: ""
  _APP_DOCKER_HUB_PASSWORD: ""
  _APP_VCS_GITHUB_PRIVATE_KEY: ""
  _APP_VCS_GITHUB_CLIENT_SECRET: ""
  _APP_VCS_GITHUB_WEBHOOK_SECRET: ""
  _APP_ASSISTANT_OPENAI_API_KEY: ""
  _APP_MIGRATIONS_FIREBASE_CLIENT_SECRET: ""
---
apiVersion: v1
kind: Service
metadata:
  namespace: appwrite
  name: appwrite
spec:
  selector:
    app: appwrite-appwrite
  ports:
    - protocol: TCP
      targetPort: 80
      port: 80

---
apiVersion: v1
kind: Service
metadata:
  namespace: appwrite
  name: appwrite-influxdb
spec:
  selector:
    app: appwrite-influxdb
  ports:
    - protocol: TCP
      port: 8086
      targetPort: 8086

---
apiVersion: v1
kind: Service
metadata:
  namespace: appwrite
  name: appwrite-mariadb
spec:
  selector:
    app: appwrite-mariadb
  ports:
    - protocol: TCP
      port: 3306
      targetPort: 3306
  type: NodePort
---
apiVersion: v1
kind: Service
metadata:
  namespace: appwrite
  name: appwrite-realtime
spec:
  selector:
    app: appwrite-realtime
  ports:
    - protocol: TCP
      port: 80
      targetPort: 80
  
---
apiVersion: v1
kind: Service
metadata:
  namespace: appwrite
  name: appwrite-redis
spec:
  selector:
    app: appwrite-redis
  ports:
    - protocol: TCP
      port: 6379
      targetPort: 6379

---
apiVersion: v1
kind: Service
metadata:
  namespace: appwrite
  name: appwrite-telegraf
spec:
  selector:
    app: appwrite-telegraf
  ports:
    - protocol: TCP
      port: 8125
      targetPort: 8125

---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  namespace: appwrite
  name: appwrite-builds
  labels:
    app: appwrite
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 8Gi

---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  namespace: appwrite
  name: appwrite-cache
  labels:
    app: appwrite
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 8Gi
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  namespace: appwrite
  name: appwrite-certificates
  labels:
    app: appwrite
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 8Gi
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  namespace: appwrite
  name: appwrite-config
  labels:
    app: appwrite
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 8Gi
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  namespace: appwrite
  name: appwrite-functions
  labels:
    app: appwrite
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 8Gi
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  namespace: appwrite
  name: appwrite-influxdb
  labels:
    app: appwrite
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 8Gi

---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  namespace: appwrite
  name: appwrite-mariadb
  labels:
    app: appwrite
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 8Gi

---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  namespace: appwrite
  name: appwrite-redis
  labels:
    app: appwrite
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 8Gi

---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  namespace: appwrite
  name: appwrite-uploads
  labels:
    app: appwrite
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 8Gi